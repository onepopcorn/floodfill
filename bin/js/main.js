!function(){"use strict";function e(e){var t=u(e.currentTarget.id);p[t[0]][t[1]].toggleWall()}function t(e){e.preventDefault();var t=u(e.currentTarget.id);p[t[0]][t[1]].toggleStart()}function n(){s.style.width=30*f+"px";for(var e=0;d>e;e++){p.push([]);for(var t=0;f>t;t++){var n=new A(e*d+t);s.appendChild(n.el),p[e].push(n)}}document.querySelector("#startBtn").addEventListener("click",r),document.querySelector("#resetBtn").addEventListener("click",c)}function r(){var e=document.querySelector(".start");if(null!==e){var t=u(e.id),n=p[t[0]][t[1]];n.type=v,o(t[0],t[1]),a()}}function o(e,t){var n=p[e][t];n.type=g,m.push(n),i(e,t)}function i(e,t){for(var n in q){var r=q[n];if(l(e+r.row,t+r.col)){var i=p[e+r.row][t+r.col];i.type===v&&i.type!==g&&o(e+r.row,t+r.col)}}}function a(){w=requestAnimationFrame(a);var e=m[0];e.setType(g),m.shift(),0===m.length&&cancelAnimationFrame(w)}function c(){for(var e=0;d>e;e++)for(var t=0;f>t;t++){var n=p[e][t];n.setType(v)}}function l(e,t){return e>=0&&d>e&&t>=0&&f>t}function u(e){var t=Math.floor(e/f),n=e-t*d;return[t,n]}var s=document.querySelector("#gameboard"),m=[],w=null,d=10,f=10,p=[],v=0,h=1,y=2,g=3,q=[{row:-1,col:-1},{row:-1,col:0},{row:-1,col:1},{row:0,col:1},{row:1,col:1},{row:1,col:0},{row:1,col:-1},{row:0,col:-1}],A=function(n){this.type=v,this.el=document.createElement("div"),this.el.className="tile",this.el.id=n,this.el.addEventListener("click",e),this.el.addEventListener("contextmenu",t)};A.prototype.setType=function(e){var t;switch(e){case h:t="tile wall";break;case g:t="tile processed";break;case y:t="tile start";break;default:t="tile"}this.el.className=t,this.type=e},A.prototype.toggleWall=function(){this.setType(this.type!==h?h:v)},A.prototype.toggleStart=function(){if(this.type!==y){var e=document.querySelector(".start");if(e){var t=u(e.id);p[t[0]][t[1]].setType(v)}this.setType(y)}},n()}(),function(){for(var e=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,n){var r=(new Date).getTime(),o=Math.max(0,16-(r-e)),i=window.setTimeout(function(){t(r+o)},o);return e=r+o,i}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiY2xpY2tIYW5kbGVyIiwiZSIsImNvb3JkcyIsImdldENvb3Jkc0Zyb21JbmRleCIsImN1cnJlbnRUYXJnZXQiLCJpZCIsInRpbGVzIiwidG9nZ2xlV2FsbCIsImNvbnRleHRIYW5kbGVyIiwicHJldmVudERlZmF1bHQiLCJ0b2dnbGVTdGFydCIsImluaXQiLCJib2FyZCIsInN0eWxlIiwid2lkdGgiLCJDT0xTIiwiaSIsIlJPV1MiLCJwdXNoIiwiaiIsInQiLCJUaWxlIiwiYXBwZW5kQ2hpbGQiLCJlbCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJzdGFydCIsInJlc2V0IiwidGlsZSIsInR5cGUiLCJOT1JNQUwiLCJwcm9jZXNzVGlsZSIsInJlbmRlciIsInJvdyIsImNvbCIsIlBST0NFU1NFRCIsInByb2Nlc3NRdWV1ZSIsInByb2Nlc3NOZWFyVGlsZXMiLCJESVJFQ1RJT05TIiwiZGlyIiwiaXNJbkJvdW5kcyIsImFuaW1JRCIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsInNldFR5cGUiLCJzaGlmdCIsImxlbmd0aCIsImNhbmNlbEFuaW1hdGlvbkZyYW1lIiwiaWR4IiwiTWF0aCIsImZsb29yIiwiV0FMTCIsIlNUQVJUIiwidGhpcyIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJwcm90b3R5cGUiLCJjbGFzc25hbWUiLCJsYXN0VGltZSIsInZlbmRvcnMiLCJ4Iiwid2luZG93IiwiY2FsbGJhY2siLCJlbGVtZW50IiwiY3VyclRpbWUiLCJEYXRlIiwiZ2V0VGltZSIsInRpbWVUb0NhbGwiLCJtYXgiLCJzZXRUaW1lb3V0IiwiY2xlYXJUaW1lb3V0Il0sIm1hcHBpbmdzIjoiQ0FBQSxXQUNDLFlBd0ZBLFNBQVNBLEdBQWFDLEdBQ3JCLEdBQUlDLEdBQVNDLEVBQW1CRixFQUFFRyxjQUFjQyxHQUNoREMsR0FBTUosRUFBTyxJQUFJQSxFQUFPLElBQUlLLGFBSzdCLFFB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LEtBQUttQixJQUFJLEVBQUcsSUFBTUosRUFBV04sSUFDMUNyRCxFQUFLd0QsT0FBT1EsV0FBVyxXQUFhUCxFQUFTRSxFQUFXRyxJQUMxREEsRUFFRixPQURBVCxHQUFXTSxFQUFXRyxFQUNmOUQsSUFHVndELE9BQU9kLHVCQUNSYyxPQUFPZCxxQkFBdUIsU0FBUzFDLEdBQ25DaUUsYUFBYWpFIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtcclxuXHQndXNlIHN0cmljdCc7XHJcblx0dmFyIGJvYXJkICAgICAgICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNnYW1lYm9hcmQnKSxcclxuXHRcdHByb2Nlc3NRdWV1ZSA9IFtdLFxyXG5cdFx0YW5pbUlEICAgICAgID0gbnVsbCxcclxuXHRcdFJPV1MgICAgICAgICA9IDEwLFxyXG5cdFx0Q09MUyAgICAgICAgID0gMTAsXHJcblx0XHR0aWxlcyAgICAgICAgPSBbXSxcclxuXHRcdE5PUk1BTCAgICAgICA9IDAsXHJcblx0XHRXQUxMICAgICAgICAgPSAxLFxyXG5cdFx0U1RBUlQgICAgICAgID0gMixcclxuXHRcdFBST0NFU1NFRCAgICA9IDMsXHJcblx0XHRESVJFQ1RJT05TICAgPSBbXHJcblx0XHRcdHtcInJvd1wiOi0xLFwiY29sXCI6LTF9LCAvLyBVcHBlciBsZWZ0IHRpbGVcclxuXHRcdFx0e1wicm93XCI6LTEsXCJjb2xcIjowfSwgLy8gVXBwZXIgdGlsZVxyXG5cdFx0XHR7XCJyb3dcIjotMSxcImNvbFwiOjF9LCAvLyBVcHBlciByaWdodCB0aWxlXHJcblx0XHRcdHtcInJvd1wiOjAsXCJjb2xcIjoxfSwgLy8gUmlnaHQgdGlsZVxyXG5cdFx0XHR7XCJyb3dcIjorMSxcImNvbFwiOisxfSwgLy8gUmlnaHQgZG93biB0aWxlXHJcblx0XHRcdHtcInJvd1wiOisxLFwiY29sXCI6MH0sIC8vIERvd24gdGlsZVxyXG5cdFx0XHR7XCJyb3dcIjorMSxcImNvbFwiOi0xfSwgLy8gRG93biBsZWZ0IHRpbGVcclxuXHRcdFx0e1wicm93XCI6MCxcImNvbFwiOi0xfSwgLy8gTGVmdCB0aWxlXHJcblx0XHRdO1xyXG5cclxuXHJcblx0LyoqXHJcblx0ICogQGNsYXNzIFRpbGUgXHJcblx0ICogQHBhcmFtIHtOdW1iZXJ9IGlkXHJcblx0ICovXHJcblx0dmFyIFRpbGUgPSBmdW5jdGlvbihpZCl7XHJcblx0XHQvLyBTZXR1cCB0eXBlXHJcblx0XHR0aGlzLnR5cGUgPSBOT1JNQUw7XHJcblx0XHQvLyBDcmVhdGUgRE9NIGVsZW1lbnRcclxuXHRcdHRoaXMuZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRcdHRoaXMuZWwuY2xhc3NOYW1lID0gJ3RpbGUnO1xyXG5cdFx0dGhpcy5lbC5pZCA9IGlkO1xyXG5cdFx0Ly8gQmluZCBldmVudHNcclxuXHRcdHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGNsaWNrSGFuZGxlcik7XHJcblx0XHR0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51Jyxjb250ZXh0SGFuZGxlcik7XHJcblx0fTtcclxuXHQvKiogXHJcblx0ICogQG1ldGhvZCBVc2VkIHRvIHNldCBhIHR5cGUgJiB1cGRhdGUgc3R5bGUgdG8gc2VsZWN0ZWQgdGlsZVxyXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIFxyXG5cdCAqL1xyXG5cdFRpbGUucHJvdG90eXBlLnNldFR5cGUgPSBmdW5jdGlvbih0eXBlKXtcclxuXHRcdHZhciBjbGFzc25hbWU7XHJcblx0XHRzd2l0Y2godHlwZSl7XHJcblx0XHRcdGNhc2UgV0FMTDpcclxuXHRcdFx0XHRjbGFzc25hbWUgPSAndGlsZSB3YWxsJztcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSBQUk9DRVNTRUQ6XHJcblx0XHRcdFx0Y2xhc3NuYW1lID0gJ3RpbGUgcHJvY2Vzc2VkJztcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSBTVEFSVDpcclxuXHRcdFx0XHRjbGFzc25hbWUgPSAndGlsZSBzdGFydCc7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGRlZmF1bHQ6XHJcblx0XHRcdFx0Y2xhc3NuYW1lID0gJ3RpbGUnO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5lbC5jbGFzc05hbWUgPSBjbGFzc25hbWU7XHJcblx0XHR0aGlzLnR5cGUgPSB0eXBlO1xyXG5cdH07XHJcblx0LyoqIFxyXG5cdCAqIEBtZXRob2QgVG9nZ2xlcyB3YWxsIG9uIHNlbGVjdGVkIHRpbGUgXHJcblx0ICovXHJcblx0VGlsZS5wcm90b3R5cGUudG9nZ2xlV2FsbCA9IGZ1bmN0aW9uKCl7XHJcblx0XHRpZih0aGlzLnR5cGUgIT09IFdBTEwpXHJcblx0XHRcdHRoaXMuc2V0VHlwZShXQUxMKTtcclxuXHRcdGVsc2VcclxuXHRcdFx0dGhpcy5zZXRUeXBlKE5PUk1BTCk7XHJcblx0fTtcclxuXHQvKiogXHJcblx0ICogQG1ldGhvZCBUb2dnbGVzIHN0YXJ0IHBvc2l0aW9uIHRvIHNlbGVjdGVkIHRpbGVcclxuXHQgKi9cclxuXHRUaWxlLnByb3RvdHlwZS50b2dnbGVTdGFydCA9IGZ1bmN0aW9uKCl7XHJcblx0XHQvLyBPbmx5IG9uZSBzdGFydCBwb2ludCBhdCBhIHRpbWVcclxuXHRcdGlmKHRoaXMudHlwZSAhPT0gU1RBUlQpXHJcblx0XHR7XHJcblx0XHRcdHZhciBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zdGFydCcpO1xyXG5cdFx0XHRpZihlbClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHZhciBjb29yZHMgPSBnZXRDb29yZHNGcm9tSW5kZXgoZWwuaWQpO1xyXG5cdFx0XHRcdHRpbGVzW2Nvb3Jkc1swXV1bY29vcmRzWzFdXS5zZXRUeXBlKE5PUk1BTCk7XHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy5zZXRUeXBlKFNUQVJUKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cdC8qKiBcclxuXHQgKiBAZnVuY3Rpb24ge0V2ZW50fSBlIENhbGxiYWNrIHRvIGNsaWNrIGV2ZW50IFxyXG5cdCAqL1xyXG5cdGZ1bmN0aW9uIGNsaWNrSGFuZGxlcihlKSB7XHJcblx0XHR2YXIgY29vcmRzID0gZ2V0Q29vcmRzRnJvbUluZGV4KGUuY3VycmVudFRhcmdldC5pZCk7XHJcblx0XHR0aWxlc1tjb29yZHNbMF1dW2Nvb3Jkc1sxXV0udG9nZ2xlV2FsbCgpO1xyXG5cdH1cclxuXHQvKiogXHJcblx0ICogQGZ1bmN0aW9uIHtFdmVudH0gZSBDYWxsYmFjayB0byByaWdodCBtb3VzZSBidXR0b24gY2xpY2tcclxuXHQgKi9cclxuXHRmdW5jdGlvbiBjb250ZXh0SGFuZGxlcihlKXtcclxuXHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdHZhciBjb29yZHMgPSBnZXRDb29yZHNGcm9tSW5kZXgoZS5jdXJyZW50VGFyZ2V0LmlkKTtcclxuXHRcdHRpbGVzW2Nvb3Jkc1swXV1bY29vcmRzWzFdXS50b2dnbGVTdGFydCgpO1xyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxuXHQvKiogXHJcblx0ICogQGZ1bmN0aW9uIEluaXRpYWxpemUgdGhlIGV4cGVyaW1lbnQgXHJcblx0ICovXHJcblx0ZnVuY3Rpb24gaW5pdCgpe1xyXG5cdFx0Ly8gU2V0IGJvYXJkIHNpemVcclxuXHRcdGJvYXJkLnN0eWxlLndpZHRoID0gQ09MUyAqIDMwICsgXCJweFwiO1xyXG5cdFx0Ly8gQ3JlYXRlIHRpbGVzXHJcblx0XHRmb3IodmFyIGk9MDtpPFJPV1M7aSsrKVxyXG5cdFx0e1xyXG5cdFx0XHR0aWxlcy5wdXNoKFtdKTtcclxuXHRcdFx0Zm9yKHZhciBqPTA7ajxDT0xTO2orKylcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHZhciB0ID0gbmV3IFRpbGUoaSAqIFJPV1MgKyBqKTtcclxuXHRcdFx0XHRib2FyZC5hcHBlbmRDaGlsZCh0LmVsKTtcclxuXHRcdFx0XHR0aWxlc1tpXS5wdXNoKHQpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHQvLyBiaW5kIHN0YXJ0IGJ1dHRvblxyXG5cdFx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3N0YXJ0QnRuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLHN0YXJ0KTtcclxuXHRcdC8vIGJpbmQgcmVzZXQgYnV0dG9uXHJcblx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcmVzZXRCdG4nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycscmVzZXQpO1xyXG5cdH1cclxuXHQvKiogXHJcblx0ICogQGZ1bmN0aW9uIFN0YXJ0cyB0aGUgYWxnb3JoaXRtIHdoZW4gY2xpY2tlZCBvbiBzdGFydCBidXR0b25cclxuXHQgKi9cclxuXHRmdW5jdGlvbiBzdGFydCgpe1xyXG5cdFx0dmFyIGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnN0YXJ0Jyk7XHJcblx0XHRcdGlmKGVsID09PSBudWxsKXtyZXR1cm47fVxyXG5cdFx0XHJcblx0XHR2YXJcdGNvb3JkcyA9IGdldENvb3Jkc0Zyb21JbmRleChlbC5pZCksXHJcblx0XHRcdHRpbGUgPSB0aWxlc1tjb29yZHNbMF1dW2Nvb3Jkc1sxXV07XHJcblx0XHRcdC8vIE11c3QgcmVzZXQgdGhlIHN0YXJ0IG5vZGUgdHlwZSB0byBlbmFibGUgdGhlIGZsb29kIGFsZ29yaXRobVxyXG5cdFx0XHR0aWxlLnR5cGUgPSBOT1JNQUw7XHJcblx0XHRcdHByb2Nlc3NUaWxlKGNvb3Jkc1swXSxjb29yZHNbMV0pO1xyXG5cdFx0XHRyZW5kZXIoKTtcclxuXHRcdFx0Ly8gdmFyIGludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtcclxuXHRcdFx0Ly8gXHR2YXIgdGlsZSA9IHByb2Nlc3NRdWV1ZVswXTtcclxuXHRcdFx0Ly8gXHR0aWxlLnNldFR5cGUoUFJPQ0VTU0VEKTtcclxuXHRcdFx0Ly8gXHRwcm9jZXNzUXVldWUuc2hpZnQoKTtcclxuXHRcdFx0Ly8gXHRpZihwcm9jZXNzUXVldWUubGVuZ3RoPT09MClcclxuXHRcdFx0Ly8gXHR7XHJcblx0XHRcdC8vIFx0XHRjbGVhckludGVydmFsKGludGVydmFsKTtcclxuXHRcdFx0Ly8gXHR9XHJcblx0XHRcdC8vIH0sMTApO1xyXG5cdH1cclxuXHQvKipcclxuXHQgKiBAZnVuY3Rpb24gU2V0IGEgdGlsZSBhcyBwcm9jZXNzZWQgJiBjYWxsIGZvciBwcm9jZXNzIG5lYXIgdGlsZXNcclxuXHQgKi9cclxuXHRmdW5jdGlvbiBwcm9jZXNzVGlsZShyb3csY29sKXtcclxuXHRcdHZhciB0aWxlID0gdGlsZXNbcm93XVtjb2xdO1xyXG5cdFx0Ly8gdGlsZS5zZXRUeXBlKFBST0NFU1NFRCk7XHJcblx0XHR0aWxlLnR5cGUgPSBQUk9DRVNTRUQ7XHJcblx0XHRwcm9jZXNzUXVldWUucHVzaCh0aWxlKTtcclxuXHRcdHByb2Nlc3NOZWFyVGlsZXMocm93LGNvbCk7XHJcblx0fVxyXG5cdC8qKlxyXG5cdCAqIEBmdW5jdGlvbiBQcm9jZXNzIG5lYXIgdGFpbHMgYXQgZ2l2ZW4gY29vcmRzXHJcblx0ICovXHJcblx0ZnVuY3Rpb24gcHJvY2Vzc05lYXJUaWxlcyhyb3csY29sKXtcclxuXHRcdGZvcih2YXIgaSBpbiBESVJFQ1RJT05TKVxyXG5cdFx0e1xyXG5cdFx0XHR2YXIgZGlyID0gRElSRUNUSU9OU1tpXTtcclxuXHRcdFx0aWYoIWlzSW5Cb3VuZHMocm93ICsgZGlyLnJvdywgY29sICsgZGlyLmNvbCkpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0fVxyXG5cdFx0XHR2YXIgdGlsZSA9IHRpbGVzW3JvdyArIGRpci5yb3ddW2NvbCArIGRpci5jb2xdO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYodGlsZS50eXBlICE9PSBOT1JNQUwpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYodGlsZS50eXBlICE9PSBQUk9DRVNTRUQpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRwcm9jZXNzVGlsZShyb3crZGlyLnJvdyxjb2wrZGlyLmNvbCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblx0LyoqXHJcblx0ICogQGZ1bmN0aW9uIFJlbmRlciBmdW5jdGlvbiB0byBkcmF3IHRpbGVzXHJcblx0ICovXHJcblx0IGZ1bmN0aW9uIHJlbmRlcigpe1xyXG5cdCBcdC8vIEtlZXAgdHJhY2sgb2YgYW5pbWF0aW9uIElEXHJcblx0IFx0YW5pbUlEID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHJlbmRlcik7XHJcblx0IFx0Ly8gUHJvY2VzcyBvbmUgdGlsZSBwZXIgZnJhbWUgJiByZW1vdmUgaXQgZnJvbSBxdWV1ZVxyXG5cdCBcdHZhciB0aWxlID0gcHJvY2Vzc1F1ZXVlWzBdO1xyXG5cdFx0dGlsZS5zZXRUeXBlKFBST0NFU1NFRCk7XHJcblx0XHRwcm9jZXNzUXVldWUuc2hpZnQoKTtcclxuXHRcdC8vIElmIG5vIG1vcmUgdGlsZXMgdG8gcHJvY2Vzcywgc3RvcCBhbmltYWl0b25cclxuXHRcdGlmKHByb2Nlc3NRdWV1ZS5sZW5ndGg9PT0wKVxyXG5cdFx0e1xyXG5cdFx0XHRjYW5jZWxBbmltYXRpb25GcmFtZShhbmltSUQpO1xyXG5cdCBcdH1cclxuXHQgfVxyXG5cdC8qKlxyXG5cdCAqIEBmdW5jdGlvbiBVc2VkIHRvIHJlc2V0IGV2ZXJ0aGlnbiB0byBpbml0aWFsIHZhbHVlc1xyXG5cdCAqL1xyXG5cdCBmdW5jdGlvbiByZXNldCgpe1xyXG5cdCBcdGZvcih2YXIgaT0wO2k8Uk9XUztpKyspXHJcblx0IFx0e1xyXG5cdCBcdFx0Zm9yKHZhciBqPTA7ajxDT0xTO2orKylcclxuXHQgXHRcdHtcclxuXHQgXHRcdFx0dmFyIHRpbGUgPSB0aWxlc1tpXVtqXTtcclxuXHQgXHRcdFx0dGlsZS5zZXRUeXBlKE5PUk1BTCk7XHJcblx0IFx0XHR9XHJcblx0IFx0fVxyXG5cdCBcdC8vIGZvcih2YXIgaT0wO2k8Uk9XUztpKyspXHJcblx0IFx0Ly8ge1xyXG5cdCBcdC8vIFx0dGlsZXMucHVzaChbXSk7XHJcblx0IFx0Ly8gXHRmb3IodmFyIGo9MDtqPENPTFM7aisrKVxyXG5cdCBcdC8vIFx0e1xyXG5cdCBcdC8vIFx0XHR2YXIgdCA9IG5ldyBUaWxlKGkgKiBST1dTICsgaik7XHJcblx0IFx0Ly8gXHRcdGJvYXJkLmFwcGVuZENoaWxkKHQuZWwpO1xyXG5cdCBcdC8vIFx0XHR0aWxlc1tpXS5wdXNoKHQpO1xyXG5cdCBcdC8vIFx0fVxyXG5cdCBcdC8vIH1cclxuXHQgfVxyXG5cdC8qKiBcclxuXHQgKiBAZnVuY3Rpb24gSGVscGVyIGZ1bmN0aW9uIHRvIGNoZWNrIGlmIGFuYWxpemVkIHBvc2l0aW9uIGV4aXN0c1xyXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSByb3dcclxuXHQgKiBAcGFyYW0ge051bWJlcn0gY29sXHJcblx0ICovXHJcblx0ZnVuY3Rpb24gaXNJbkJvdW5kcyhyb3csY29sKXtcclxuXHRcdHJldHVybiByb3cgPj0gMCAmJiByb3cgPCBST1dTICYmIGNvbCA+PSAwICYmIGNvbCA8IENPTFM7XHJcblx0fVxyXG5cdC8qKiBcclxuXHQgKiBAZnVuY3Rpb24gR2V0cyBjb29yZGluYXRlcyBmb3IgZ2l2ZW4gdGlsZSBpbmRleCBcclxuXHQgKiBAcGFyYW0ge051bWJlcn0gaWR4IEluZGV4IGZyb20gc2VsZWN0ZWQgdGlsZVxyXG5cdCAqIEByZXR1cm4ge0FycmF5fSBBcnJheSB3aXRoIHJvdyBhbmQgY29sdW1uIHZhbHVlc1xyXG5cdCAqL1xyXG5cdGZ1bmN0aW9uIGdldENvb3Jkc0Zyb21JbmRleChpZHgpe1xyXG5cdFx0dmFyIHJvdyA9IE1hdGguZmxvb3IoaWR4IC8gQ09MUyksXHJcblx0XHRcdGNvbCA9IGlkeCAtIHJvdyAqIFJPV1M7XHJcblx0XHRyZXR1cm4gW3Jvdyxjb2xdO1xyXG5cdH1cclxuXHQvKiogXHJcblx0ICogQGZ1bmN0aW9uIEdldHMgdGlsZSBpbmRleCBmcm9tIGdpdmVuIGNvb3JkaW5hdGVzIFxyXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSByb3dcclxuXHQgKiBAcGFyYW0ge051bWJlcn0gY29sXHJcblx0ICogQHJldHVybiB7QXJyYXl9IEFycmF5IHdpdGggcm93IGFuZCBjb2x1bW4gdmFsdWVzXHJcblx0ICovXHJcblx0ZnVuY3Rpb24gZ2V0SW5kZXhGcm9tQ29vcmRzKHJvdyxjb2wpe1xyXG5cdFx0dmFyIGlkeCA9IHJvdyAqIFJPV1MgKyBjb2w7IFxyXG5cdFx0cmV0dXJuIGlkeDtcclxuXHR9XHJcblx0Ly8gRW50cnkgcG9pbnRcclxuXHRpbml0KCk7XHJcbn0pKCk7XHJcblxyXG4vKipcclxuICogUmVxdWVzdCBBbmltYXRpb24gRnJhbWUgcG9seWZpbGwgXHJcbiAqIGh0dHA6Ly93d3cucGF1bGlyaXNoLmNvbS8yMDExL3JlcXVlc3RhbmltYXRpb25mcmFtZS1mb3Itc21hcnQtYW5pbWF0aW5nLyBcclxuICovXHJcbihmdW5jdGlvbigpIHtcclxuICAgIHZhciBsYXN0VGltZSA9IDA7XHJcbiAgICB2YXIgdmVuZG9ycyA9IFsnd2Via2l0JywgJ21veiddO1xyXG4gICAgZm9yKHZhciB4ID0gMDsgeCA8IHZlbmRvcnMubGVuZ3RoICYmICF3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lOyArK3gpIHtcclxuICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gd2luZG93W3ZlbmRvcnNbeF0rJ1JlcXVlc3RBbmltYXRpb25GcmFtZSddO1xyXG4gICAgICAgIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSA9XHJcbiAgICAgICAgICB3aW5kb3dbdmVuZG9yc1t4XSsnQ2FuY2VsQW5pbWF0aW9uRnJhbWUnXSB8fCB3aW5kb3dbdmVuZG9yc1t4XSsnQ2FuY2VsUmVxdWVzdEFuaW1hdGlvbkZyYW1lJ107XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCF3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKVxyXG4gICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSBmdW5jdGlvbihjYWxsYmFjaywgZWxlbWVudCkge1xyXG4gICAgICAgICAgICB2YXIgY3VyclRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuICAgICAgICAgICAgdmFyIHRpbWVUb0NhbGwgPSBNYXRoLm1heCgwLCAxNiAtIChjdXJyVGltZSAtIGxhc3RUaW1lKSk7XHJcbiAgICAgICAgICAgIHZhciBpZCA9IHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyBjYWxsYmFjayhjdXJyVGltZSArIHRpbWVUb0NhbGwpOyB9LFxyXG4gICAgICAgICAgICAgIHRpbWVUb0NhbGwpO1xyXG4gICAgICAgICAgICBsYXN0VGltZSA9IGN1cnJUaW1lICsgdGltZVRvQ2FsbDtcclxuICAgICAgICAgICAgcmV0dXJuIGlkO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgaWYgKCF3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUpXHJcbiAgICAgICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lID0gZnVuY3Rpb24oaWQpIHtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGlkKTtcclxuICAgICAgICB9O1xyXG59KCkpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==